# 管控中心产品重构说明

本文档记录 KEL 管控中心菜单与功能重构的结论，供前端实现时对照。

## 一、菜单结构

### 一级菜单与二级菜单

| 一级菜单 | 二级菜单 | 内容 |
|---------|----------|------|
| **作业监控** | 总览 | 原仪表盘：统计卡片 + 最近任务 |
| | 任务列表 | 原任务管理：筛选、分页、详情、删除、Manifest |
| | 按作业 | 先选 jobCode，再展示该作业下的任务 |
| **作业配置** | 配置列表 | 作业/全局配置的增删改查；**去掉「导入配置到 DB」**；不提供「从 DB 导出到文件」或同步类能力 |
| **作业运维** | 作业执行 | 选作业、选 extract/load、执行、看结果 |
| | 表级导出 | 单表全量/增量、导出历史 |
| | 系统监控 | 原系统监控：磁盘空间等（收进作业运维下） |

## 二、作业维度跳转

- **统一用作业编码（jobCode）作为跳转键**，在「作业监控」「作业配置」「作业运维」之间互相跳转。
- **任务详情**：统一从「作业监控 → 任务列表」进入；其他模块只提供「按 jobCode 跳转到任务列表并带筛选」，不直接打开任务详情。
- 实现方式：前端路由/状态带 `jobCode` 参数，进入任务列表时解析并应用筛选；行为一致、实现简单。

## 三、与现状对照

- 仪表盘 + 任务管理 → 合并为「作业监控」（总览 / 任务列表 / 按作业）。
- 作业配置 → 独立菜单，仅配置列表，去掉「导入配置到 DB」。
- 作业执行 + 表级导出 + 系统监控 → 合并为「作业运维」下三个二级。

以上为已确认结论，开发时按此实施即可。

## 四、补充说明（后续迭代）

- **任务删除**：当前为**物理删除**（DELETE），非逻辑删除。表 `task_execution` 无 `deleted` 字段；若需逻辑删除需改表结构及删除接口。
- **总览时间范围**：总览支持按时间过滤（最近 1/3/7 天、全部），默认最近 1 天；接口 `GET /api/tasks`、`GET /api/tasks/stats` 支持可选参数 `days`。
- **表级导出与加载**：支持表级卸载（*_extract）和表级加载（*_load）。策略按作业配置执行（卸载的全量/增量、加载的 TRUNCATE_LOAD/APPEND/MERGE 均由配置决定），界面不选全量/增量。历史记录表 `manual_export` 含 `type`（EXPORT/LOAD）、`source_batch`（仅 LOAD）。
